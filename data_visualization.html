<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />



<title>P01 - Data visualization</title>

<script src="libs/jquery/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap/js/bootstrap.min.js"></script>
<script src="libs/bootstrap/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap/shim/respond.min.js"></script>
<script src="libs/htmlwidgets/htmlwidgets.js"></script>
<link href="libs/dygraphs/dygraph.css" rel="stylesheet" />
<script src="libs/dygraphs/dygraph-combined.js"></script>
<script src="libs/moment/moment.js"></script>
<script src="libs/moment-timezone/moment-timezone-with-data.js"></script>
<script src="libs/dygraphs-binding/dygraphs.js"></script>
<script src="libs/datatables-binding/datatables.js"></script>
<script src="libs/datatables/jquery.dataTables.min.js"></script>
<link href="libs/datatables-default/dataTables.extra.css" rel="stylesheet" />
<link href="libs/datatables-default/jquery.dataTables.min.css" rel="stylesheet" />
<script src="libs/d3/d3.min.js"></script>
<script src="libs/forceNetwork-binding-0.1.2.1/forceNetwork.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<link rel="stylesheet"
      href="libs/highlight/default.css"
      type="text/css" />
<script src="libs/highlight/highlight.js"></script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img { 
  max-width:100%; 
  height: auto; 
}
</style>
<div class="container-fluid main-container">

<style type="text/css">
  body {
    padding-top: 20px;
  }
  .navbar-brand {
    font-weight: bold;
  }
  footer {
    border-top: 1px solid #CCC;
    margin-top: 60px;
    margin-bottom: 48px;
    opacity: 0.75;
  }
  .content-body>:first-child, .content-body>:first-child>:first-child {
    margin-top: 0 !important;
  }
  p code {
    white-space: inherit;
  }
</style>

<div class="fluid-row">
  <div class="col-sm-12">
    <nav class="navbar navbar-inverse">
      <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <a class="navbar-brand" href="./">P01 - Advanced R</a>
        </div>
      </div>
    </nav>
  </div>
</div>

<div class="fluid-row">
  <div class="col-sm-3">
    <div class="list-group">
      <a class="list-group-item" href="./">Introduction</a>
      <a class="list-group-item" href="creating_r_packages.html">Creating R packages</a>
      <a class="list-group-item" href="data_linkage.html">Data linkage</a>
      <a class="list-group-item" href="data_visualization.html">Data visualization</a>
      <a class="list-group-item" href="data_wrangling.html">Data wrangling</a>
      <a class="list-group-item" href="statistical_programming.html">Statistical programming</a>
      <a class="list-group-item" href="zelig.html">Zelig</a>
      <!--<a class="list-group-item" href="raster.html">Raster Images</a>-->
    </div>
    <script>
      // manage active state of toc based on current page
      var href = window.location.pathname;
      href = href.substr(href.lastIndexOf('/') + 1);
      if (href === "" || href === "index.html")
        href = "./";
      $('a.list-group-item[href="' + href + '"]').addClass('active');
    </script>
  </div>
  <div class="col-sm-9 content-body">



<div id="data-visualization" class="section level2">
<h2>Data visualization</h2>
<div id="static" class="section level3">
<h3>Static</h3>
<pre class="r"><code>library(ggplot2)</code></pre>
<pre><code>## Loading required package: methods</code></pre>
<pre class="r"><code>crimes &lt;- data.frame(state = tolower(rownames(USArrests)), USArrests)
library(reshape2) # for melt
crimesm &lt;- melt(crimes, id = 1)
if (require(maps)) {
  states_map &lt;- map_data(&quot;state&quot;)
  ggplot(crimes, aes(map_id = state)) + geom_map(aes(fill = Murder), map = states_map) + expand_limits(x = states_map$long, y = states_map$lat)
  last_plot() + coord_map()
  ggplot(crimesm, aes(map_id = state)) + geom_map(aes(fill = value), map = states_map) + expand_limits(x = states_map$long, y = states_map$lat) + facet_wrap( ~ variable)
}</code></pre>
<pre><code>## Loading required package: maps</code></pre>
<p><img src="data_visualization_files/figure-html/unnamed-chunk-1-1.png" title="" alt="" width="100%" /></p>
</div>
<div id="dynamic" class="section level3">
<h3>Dynamic</h3>
<pre class="r"><code>library(dygraphs)
dygraph(nhtemp, main = &quot;New Haven Temperatures&quot;) %&gt;% 
  dyRangeSelector(dateWindow = c(&quot;1920-01-01&quot;, &quot;1960-01-01&quot;))</code></pre>
<p><div id="htmlwidget-5716" style="width:100%;height:216px;" class="dygraphs"></div>
<script type="application/json" data-for="htmlwidget-5716">{
  "x": {
    "attrs": {
      "title": "New Haven Temperatures",
      "labels": ["year", "V1"],
      "legend": "auto",
      "axes": {
        "x": {
          "pixelsPerLabel": 50
        }
      },
      "showRangeSelector": true,
      "dateWindow": ["1920-01-01T00:00:00Z", "1960-01-01T00:00:00Z"],
      "rangeSelectorHeight": 40,
      "rangeSelectorPlotFillColor": " #A7B1C4",
      "rangeSelectorPlotStrokeColor": "#808FAB",
      "interactionModel": "Dygraph.Interaction.defaultModel"
    },
    "scale": "yearly",
    "annotations": [],
    "shadings": [],
    "events": [],
    "data": [
      ["1912-01-01T00:00:00Z", "1913-01-01T00:00:00Z", "1914-01-01T00:00:00Z", "1915-01-01T00:00:00Z", "1916-01-01T00:00:00Z", "1917-01-01T00:00:00Z", "1918-01-01T00:00:00Z", "1919-01-01T00:00:00Z", "1920-01-01T00:00:00Z", "1921-01-01T00:00:00Z", "1922-01-01T00:00:00Z", "1923-01-01T00:00:00Z", "1924-01-01T00:00:00Z", "1925-01-01T00:00:00Z", "1926-01-01T00:00:00Z", "1927-01-01T00:00:00Z", "1928-01-01T00:00:00Z", "1929-01-01T00:00:00Z", "1930-01-01T00:00:00Z", "1931-01-01T00:00:00Z", "1932-01-01T00:00:00Z", "1933-01-01T00:00:00Z", "1934-01-01T00:00:00Z", "1935-01-01T00:00:00Z", "1936-01-01T00:00:00Z", "1937-01-01T00:00:00Z", "1938-01-01T00:00:00Z", "1939-01-01T00:00:00Z", "1940-01-01T00:00:00Z", "1941-01-01T00:00:00Z", "1942-01-01T00:00:00Z", "1943-01-01T00:00:00Z", "1944-01-01T00:00:00Z", "1945-01-01T00:00:00Z", "1946-01-01T00:00:00Z", "1947-01-01T00:00:00Z", "1948-01-01T00:00:00Z", "1949-01-01T00:00:00Z", "1950-01-01T00:00:00Z", "1951-01-01T00:00:00Z", "1952-01-01T00:00:00Z", "1953-01-01T00:00:00Z", "1954-01-01T00:00:00Z", "1955-01-01T00:00:00Z", "1956-01-01T00:00:00Z", "1957-01-01T00:00:00Z", "1958-01-01T00:00:00Z", "1959-01-01T00:00:00Z", "1960-01-01T00:00:00Z", "1961-01-01T00:00:00Z", "1962-01-01T00:00:00Z", "1963-01-01T00:00:00Z", "1964-01-01T00:00:00Z", "1965-01-01T00:00:00Z", "1966-01-01T00:00:00Z", "1967-01-01T00:00:00Z", "1968-01-01T00:00:00Z", "1969-01-01T00:00:00Z", "1970-01-01T00:00:00Z", "1971-01-01T00:00:00Z"],
      [49.9, 52.3, 49.4, 51.1, 49.4, 47.9, 49.8, 50.9, 49.3, 51.9, 50.8, 49.6, 49.3, 50.6, 48.4, 50.7, 50.9, 50.6, 51.5, 52.8, 51.8, 51.1, 49.8, 50.2, 50.4, 51.6, 51.8, 50.9, 48.8, 51.7, 51, 50.6, 51.7, 51.5, 52.1, 51.3, 51, 54, 51.4, 52.7, 53.1, 54.6, 52, 52, 50.9, 52.6, 50.2, 52.6, 51.6, 51.9, 50.5, 50.9, 51.7, 51.4, 51.7, 50.8, 51.9, 51.8, 51.9, 53]
    ]
  },
  "evals": ["attrs.interactionModel"]
}</script></p>
<pre class="r"><code>library(DT)
datatable(as.data.frame(nhtemp), options = list(pageLength = 5))</code></pre>
<p><div id="htmlwidget-4929" style="width:100%;height:auto;" class="datatables"></div>
<script type="application/json" data-for="htmlwidget-4929">{
  "x": {
    "data": [
      ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32", "33", "34", "35", "36", "37", "38", "39", "40", "41", "42", "43", "44", "45", "46", "47", "48", "49", "50", "51", "52", "53", "54", "55", "56", "57", "58", "59", "60"],
      [49.9, 52.3, 49.4, 51.1, 49.4, 47.9, 49.8, 50.9, 49.3, 51.9, 50.8, 49.6, 49.3, 50.6, 48.4, 50.7, 50.9, 50.6, 51.5, 52.8, 51.8, 51.1, 49.8, 50.2, 50.4, 51.6, 51.8, 50.9, 48.8, 51.7, 51, 50.6, 51.7, 51.5, 52.1, 51.3, 51, 54, 51.4, 52.7, 53.1, 54.6, 52, 52, 50.9, 52.6, 50.2, 52.6, 51.6, 51.9, 50.5, 50.9, 51.7, 51.4, 51.7, 50.8, 51.9, 51.8, 51.9, 53]
    ],
    "container": "<table class=\"display\">\n  <thead>\n    <tr>\n      <th> </th>\n      <th>x</th>\n    </tr>\n  </thead>\n</table>",
    "options": {
      "pageLength": 5,
      "columnDefs": [
        {
          "className": "dt-right",
          "targets": 1
        },
        {
          "orderable": false,
          "targets": 0
        }
      ],
      "order": [],
      "autoWidth": false,
      "orderClasses": false,
      "lengthMenu": [5, 10, 25, 50, 100]
    },
    "callback": null,
    "filter": "none"
  },
  "evals": []
}</script></p>
<pre class="r"><code>library(networkD3)
data(MisLinks, MisNodes)
forceNetwork(Links = MisLinks, Nodes = MisNodes, Source = &quot;source&quot;,
             Target = &quot;target&quot;, Value = &quot;value&quot;, NodeID = &quot;name&quot;,
             Group = &quot;group&quot;, opacity = 0.6)</code></pre>
<p><div id="htmlwidget-7837" style="width:100%;height:216px;" class="forceNetwork"></div>
<script type="application/json" data-for="htmlwidget-7837">{
  "x": {
    "links": {
      "source": [1, 2, 3, 3, 4, 5, 6, 7, 8, 9, 11, 11, 11, 11, 12, 13, 14, 15, 17, 18, 18, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 25, 25, 25, 26, 26, 26, 26, 27, 27, 27, 27, 27, 28, 28, 29, 29, 29, 30, 31, 31, 31, 31, 32, 33, 33, 34, 34, 35, 35, 35, 36, 36, 36, 36, 37, 37, 37, 37, 37, 38, 38, 38, 38, 38, 38, 39, 40, 41, 41, 42, 42, 42, 43, 43, 43, 44, 44, 45, 47, 48, 48, 48, 48, 49, 49, 50, 50, 51, 51, 51, 52, 52, 53, 54, 54, 54, 55, 55, 55, 55, 55, 55, 55, 55, 55, 55, 56, 56, 57, 57, 57, 58, 58, 58, 58, 58, 59, 59, 59, 59, 60, 60, 60, 61, 61, 61, 61, 61, 61, 62, 62, 62, 62, 62, 62, 62, 62, 63, 63, 63, 63, 63, 63, 63, 63, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 65, 65, 65, 65, 65, 65, 65, 65, 65, 65, 66, 66, 66, 66, 66, 66, 66, 66, 66, 67, 68, 68, 68, 68, 68, 68, 69, 69, 69, 69, 69, 69, 69, 70, 70, 70, 70, 70, 70, 70, 70, 71, 71, 71, 71, 71, 71, 71, 71, 72, 72, 72, 73, 74, 74, 75, 75, 75, 75, 75, 75, 75, 76, 76, 76, 76, 76, 76, 76],
      "target": [0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 10, 3, 2, 0, 11, 11, 11, 11, 16, 16, 17, 16, 17, 18, 16, 17, 18, 19, 16, 17, 18, 19, 20, 16, 17, 18, 19, 20, 21, 16, 17, 18, 19, 20, 21, 22, 12, 11, 23, 11, 24, 23, 11, 24, 11, 16, 25, 11, 23, 25, 24, 26, 11, 27, 23, 27, 11, 23, 30, 11, 23, 27, 11, 11, 27, 11, 29, 11, 34, 29, 34, 35, 11, 29, 34, 35, 36, 11, 29, 34, 35, 36, 37, 11, 29, 25, 25, 24, 25, 41, 25, 24, 11, 26, 27, 28, 11, 28, 46, 47, 25, 27, 11, 26, 11, 49, 24, 49, 26, 11, 51, 39, 51, 51, 49, 26, 51, 49, 39, 54, 26, 11, 16, 25, 41, 48, 49, 55, 55, 41, 48, 55, 48, 27, 57, 11, 58, 55, 48, 57, 48, 58, 59, 48, 58, 60, 59, 57, 55, 55, 58, 59, 48, 57, 41, 61, 60, 59, 48, 62, 57, 58, 61, 60, 55, 55, 62, 48, 63, 58, 61, 60, 59, 57, 11, 63, 64, 48, 62, 58, 61, 60, 59, 57, 55, 64, 58, 59, 62, 65, 48, 63, 61, 60, 57, 25, 11, 24, 27, 48, 41, 25, 68, 11, 24, 27, 48, 41, 25, 69, 68, 11, 24, 27, 41, 58, 27, 69, 68, 70, 11, 48, 41, 25, 26, 27, 11, 48, 48, 73, 69, 68, 25, 48, 41, 70, 71, 64, 65, 66, 63, 62, 48, 58],
      "value": [1, 8, 10, 6, 1, 1, 1, 1, 2, 1, 1, 3, 3, 5, 1, 1, 1, 1, 4, 4, 4, 4, 4, 4, 3, 3, 3, 4, 3, 3, 3, 3, 5, 3, 3, 3, 3, 4, 4, 3, 3, 3, 3, 4, 4, 4, 2, 9, 2, 7, 13, 1, 12, 4, 31, 1, 1, 17, 5, 5, 1, 1, 8, 1, 1, 1, 2, 1, 2, 3, 2, 1, 1, 2, 1, 3, 2, 3, 3, 2, 2, 2, 2, 1, 2, 2, 2, 2, 1, 2, 2, 2, 2, 2, 1, 1, 1, 2, 3, 2, 2, 1, 3, 1, 1, 3, 1, 2, 1, 2, 1, 1, 1, 3, 2, 1, 1, 9, 2, 2, 1, 1, 1, 2, 1, 1, 6, 12, 1, 1, 21, 19, 1, 2, 5, 4, 1, 1, 1, 1, 1, 7, 7, 6, 1, 4, 15, 5, 6, 2, 1, 4, 2, 2, 6, 2, 5, 1, 1, 9, 17, 13, 7, 2, 1, 6, 3, 5, 5, 6, 2, 4, 3, 2, 1, 5, 12, 5, 4, 10, 6, 2, 9, 1, 1, 5, 7, 3, 5, 5, 5, 2, 5, 1, 2, 3, 3, 1, 2, 2, 1, 1, 1, 1, 3, 5, 1, 1, 1, 1, 1, 6, 6, 1, 1, 2, 1, 1, 4, 4, 4, 1, 1, 1, 1, 1, 1, 2, 2, 2, 1, 1, 1, 1, 2, 1, 1, 2, 2, 3, 3, 3, 3, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
    },
    "nodes": {
      "name": ["Myriel", "Napoleon", "Mlle.Baptistine", "Mme.Magloire", "CountessdeLo", "Geborand", "Champtercier", "Cravatte", "Count", "OldMan", "Labarre", "Valjean", "Marguerite", "Mme.deR", "Isabeau", "Gervais", "Tholomyes", "Listolier", "Fameuil", "Blacheville", "Favourite", "Dahlia", "Zephine", "Fantine", "Mme.Thenardier", "Thenardier", "Cosette", "Javert", "Fauchelevent", "Bamatabois", "Perpetue", "Simplice", "Scaufflaire", "Woman1", "Judge", "Champmathieu", "Brevet", "Chenildieu", "Cochepaille", "Pontmercy", "Boulatruelle", "Eponine", "Anzelma", "Woman2", "MotherInnocent", "Gribier", "Jondrette", "Mme.Burgon", "Gavroche", "Gillenormand", "Magnon", "Mlle.Gillenormand", "Mme.Pontmercy", "Mlle.Vaubois", "Lt.Gillenormand", "Marius", "BaronessT", "Mabeuf", "Enjolras", "Combeferre", "Prouvaire", "Feuilly", "Courfeyrac", "Bahorel", "Bossuet", "Joly", "Grantaire", "MotherPlutarch", "Gueulemer", "Babet", "Claquesous", "Montparnasse", "Toussaint", "Child1", "Child2", "Brujon", "Mme.Hucheloup"],
      "group": [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 3, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 4, 4, 5, 4, 0, 2, 3, 2, 2, 2, 2, 2, 2, 2, 2, 4, 6, 4, 4, 5, 0, 0, 7, 7, 8, 5, 5, 5, 5, 5, 5, 8, 5, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 9, 4, 4, 4, 4, 5, 10, 10, 4, 8]
    },
    "options": {
      "NodeID": "name",
      "Group": "group",
      "colourScale": "d3.scale.category20()",
      "fontsize": 7,
      "clickTextSize": 17.5,
      "linkDistance": 50,
      "linkWidth": "function(d) { return Math.sqrt(d.value); }",
      "charge": -120,
      "linkColour": "#666",
      "opacity": 0.6
    }
  },
  "evals": []
}</script></p>
</div>
<div id="shiny" class="section level3">
<h3>Shiny</h3>
<p><a href="http://shiny.rstudio.com/gallery/superzip-example.html" class="uri">http://shiny.rstudio.com/gallery/superzip-example.html</a> <a href="http://shiny.rstudio.com/gallery/bus-dashboard.html" class="uri">http://shiny.rstudio.com/gallery/bus-dashboard.html</a></p>
</div>
<div id="lab-session" class="section level3">
<h3>Lab session</h3>
<ul>
<li>Same map (e.g., county-level choropleth) with different libraries</li>
<li>Create similar interactive graphs with different libraries</li>
<li>Embed a Leaflet d3-map into an R Shiny application</li>
</ul>
</div>
</div>

<footer>
<p><small>Christine Choirat<br/>
P01 - Advanced R<br/>
Harvard T.H Chan School of Public Health <a>http://www.hsph.harvard.edu/</a>
</small></p>
</footer>

  </div>
</div>

<a href="https://github.com/p01r/p01r"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>

</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
